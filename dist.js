function e(b){if(!(b instanceof Uint8Array))if(b instanceof Buffer)b=new Uint8Array(b);else if("string"===typeof b)b=new Uint8Array(new Buffer(b,"utf8"));else throw Error("Input must be an string, Buffer or Uint8Array");return b}function f(b){return Array.prototype.map.call(b,function(b){return(16>b?"0":"")+b.toString(16)}).join("")}function h(b,c){var a=k,d=a[b]+a[c],g=a[b+1]+a[c+1];4294967296<=d&&g++;a[b]=d;a[b+1]=g}
function l(b,c,a){var d=k,g=d[b]+c;0>c&&(g+=4294967296);c=d[b+1]+a;4294967296<=g&&c++;d[b]=g;d[b+1]=c}function p(b,c,a,d,g,t){var m=q[g],n=q[g+1];g=q[t];t=q[t+1];h(b,c);l(b,m,n);m=k[d]^k[b];n=k[d+1]^k[b+1];k[d]=n;k[d+1]=m;h(a,d);m=k[c]^k[a];n=k[c+1]^k[a+1];k[c]=m>>>24^n<<8;k[c+1]=n>>>24^m<<8;h(b,c);l(b,g,t);m=k[d]^k[b];n=k[d+1]^k[b+1];k[d]=m>>>16^n<<16;k[d+1]=n>>>16^m<<16;h(a,d);m=k[c]^k[a];n=k[c+1]^k[a+1];k[c]=n>>>31^m<<1;k[c+1]=m>>>31^n<<1}
var r=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,
5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(b){return 2*b})),k=new Uint32Array(32),q=new Uint32Array(32);
function v(b,c){for(var a=0,a=0;16>a;a++)k[a]=b.b[a],k[a+16]=r[a];k[24]^=b.t;k[25]^=b.t/4294967296;c&&(k[28]=~k[28],k[29]=~k[29]);for(a=0;32>a;a++){var d=b.c,g=4*a;q[a]=d[g]^d[g+1]<<8^d[g+2]<<16^d[g+3]<<24}for(a=0;12>a;a++)p(0,8,16,24,u[16*a+0],u[16*a+1]),p(2,10,18,26,u[16*a+2],u[16*a+3]),p(4,12,20,28,u[16*a+4],u[16*a+5]),p(6,14,22,30,u[16*a+6],u[16*a+7]),p(0,10,20,30,u[16*a+8],u[16*a+9]),p(2,12,22,24,u[16*a+10],u[16*a+11]),p(4,14,16,26,u[16*a+12],u[16*a+13]),p(6,8,18,28,u[16*a+14],u[16*a+15]);for(a=
0;16>a;a++)b.b[a]=b.b[a]^k[a]^k[a+16]}function w(b,c){if(0===b||64<b)throw Error("Illegal output length, expected 0 < length <= 64");if(c&&64<c.length)throw Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var a={c:new Uint8Array(128),b:new Uint32Array(16),t:0,a:0,f:b},d=0;16>d;d++)a.b[d]=r[d];a.b[0]=a.b[0]^16842752^(c?c.length:0)<<8^b;c&&(x(a,c),a.a=128);return a}function x(b,c){for(var a=0;a<c.length;a++)128===b.a&&(b.t+=b.a,v(b,!1),b.a=0),b.c[b.a++]=c[a]}
function y(b){for(b.t+=b.a;128>b.a;)b.c[b.a++]=0;v(b,!0);for(var c=new Uint8Array(b.f),a=0;a<b.f;a++)c[a]=b.b[a>>2]>>8*(a&3);return c}function z(b,c,a){a=a||64;b=e(b);c=w(a,c);x(c,b);return y(c)}function A(b,c,a,d,g,t){B[b]=B[b]+B[c]+g;B[d]=C(B[d]^B[b],16);B[a]+=B[d];B[c]=C(B[c]^B[a],12);B[b]=B[b]+B[c]+t;B[d]=C(B[d]^B[b],8);B[a]+=B[d];B[c]=C(B[c]^B[a],7)}function C(b,c){return b>>>c^b<<32-c}
var D=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),E=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,
12,13,0]),B=new Uint32Array(16),F=new Uint32Array(16);
function G(b,c){for(var a=0,a=0;8>a;a++)B[a]=b.b[a],B[a+8]=D[a];B[12]^=b.t;B[13]^=b.t/4294967296;c&&(B[14]=~B[14]);for(a=0;16>a;a++){var d=b.c,g=4*a;F[a]=d[g]^d[g+1]<<8^d[g+2]<<16^d[g+3]<<24}for(a=0;10>a;a++)A(0,4,8,12,F[E[16*a+0]],F[E[16*a+1]]),A(1,5,9,13,F[E[16*a+2]],F[E[16*a+3]]),A(2,6,10,14,F[E[16*a+4]],F[E[16*a+5]]),A(3,7,11,15,F[E[16*a+6]],F[E[16*a+7]]),A(0,5,10,15,F[E[16*a+8]],F[E[16*a+9]]),A(1,6,11,12,F[E[16*a+10]],F[E[16*a+11]]),A(2,7,8,13,F[E[16*a+12]],F[E[16*a+13]]),A(3,4,9,14,F[E[16*a+
14]],F[E[16*a+15]]);for(a=0;8>a;a++)b.b[a]=b.b[a]^B[a]^B[a+8]}function H(b,c){if(!(0<b&&32>=b))throw Error("Incorrect output length, should be in [1, 32]");var a=c?c.length:0;if(c&&!(0<a&&32>=a))throw Error("Incorrect key length, should be in [1, 32]");var d={b:new Uint32Array(D),c:new Uint32Array(64),a:0,t:0,f:b};d.b[0]=d.b[0]^16842752^a<<8^b;0<a&&(I(d,c),d.a=64);return d}function I(b,c){for(var a=0;a<c.length;a++)64===b.a&&(b.t+=b.a,G(b,!1),b.a=0),b.c[b.a++]=c[a]}
function J(b){for(b.t+=b.a;64>b.a;)b.c[b.a++]=0;G(b,!0);for(var c=new Uint8Array(b.f),a=0;a<b.f;a++)c[a]=b.b[a>>2]>>8*(a&3)&255;return c}function K(b,c,a){a=a||32;b=e(b);c=H(a,c);I(c,b);return J(c)}var L={};L.blake2s=K;L.blake2sHex=function(b,c,a){b=K(b,c,a);return f(b)};L.blake2s_init=H;L.blake2s_update=I;L.blake2s_final=J;L.blake2b=z;L.blake2bHex=function(b,c,a){b=z(b,c,a);return f(b)};L.blake2b_init=w;L.blake2b_update=x;L.blake2b_final=y;module.exports=L;
